<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>メメントモリ育成スタイル診断</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <style>
    body {
      font-family: 'Noto Sans JP', sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 2rem;
      display: flex;
      justify-content: center;
    }
    .container {
      background: #fff;
      border-radius: 16px;
      padding: 2rem;
      max-width: 480px;
      width: 100%;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    h1 {
      text-align: center;
      font-size: 1.8rem;
      margin-bottom: 2rem;
    }
    h1 span {
      display: block;
    }
    label {
      display: flex;
      align-items: center;
      font-weight: bold;
      margin: 1rem 0 0.25rem;
    }
    input {
      width: 100%;
      padding: 0.75rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: #f1f1f1;
    }
    button {
      margin-top: 2rem;
      width: 100%;
      padding: 0.75rem;
      background: #e3f0ff;
      border: 1px solid #005bc5;
      color: #005bc5;
      font-weight: bold;
      font-size: 1rem;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
    }
    .result {
      margin-top: 2rem;
      background: #f1faff;
      border-radius: 12px;
      padding: 1rem;
      line-height: 1.5;
    }
    .share {
      margin-top: 1rem;
      text-align: center;
    }
    .share a {
      text-decoration: none;
      color: #005bc5;
      font-weight: bold;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>
      <span>メメントモリ</span>
      育成スタイル診断
    </h1>

    <label><span class="material-icons">show_chart</span>レベルリンク戦闘力</label>
    <input type="number" id="levelPower" placeholder="例: 123456789" />

    <label><span class="material-icons">groups</span>バトリ編成5体合計</label>
    <input type="number" id="battlePower" placeholder="例: 23456789" />

    <button onclick="diagnose()">
      <span class="material-icons">bar_chart</span>診断する
    </button>

    <div id="output" class="result" style="display: none;"></div>
    <div id="share" class="share" style="display: none;"></div>
  </div>

  <script>
    const fgiTable = [
      { rank: "SS", min: 0, max: 0.126, style: "超分散型～分散型" },
      { rank: "SS", min: 0.126, max: 0.132, style: "バランス分散型" },
      { rank: "SS", min: 0.132, max: 1.000, style: "準メイン集中型～メイン集中型" },
      { rank: "S", min: 0, max: 0.146, style: "超分散型～分散型" },
      { rank: "S", min: 0.146, max: 0.162, style: "バランス分散型" },
      { rank: "S", min: 0.162, max: 1.000, style: "準メイン集中型～メイン集中型" },
      { rank: "A", min: 0, max: 0.164, style: "超分散型～分散型" },
      { rank: "A", min: 0.164, max: 0.215, style: "バランス分散型" },
      { rank: "A", min: 0.215, max: 1.000, style: "準メイン集中型～メイン集中型" },
      { rank: "B", min: 0, max: 0.188, style: "超分散型～分散型" },
      { rank: "B", min: 0.188, max: 0.242, style: "バランス分散型" },
      { rank: "B", min: 0.242, max: 1.000, style: "準メイン集中型～メイン集中型" },
      { rank: "C", min: 0, max: 0.230, style: "超分散型～分散型" },
      { rank: "C", min: 0.230, max: 0.278, style: "バランス分散型" },
      { rank: "C", min: 0.278, max: 1.000, style: "準メイン集中型～メイン集中型" },
    ];

    function diagnose() {
      const levelPower = Number(document.getElementById("levelPower").value);
      const battlePower = Number(document.getElementById("battlePower").value);
      const output = document.getElementById("output");
      const share = document.getElementById("share");

      if (!levelPower || !battlePower || battlePower >= levelPower) {
        output.innerText = "正しい値を入力してください。";
        output.style.display = "block";
        share.style.display = "none";
        return;
      }

      const fgi = battlePower / levelPower;
      let rank = "C";
      if (levelPower >= 6000000000) rank = "SS";
      else if (levelPower >= 3000000000) rank = "S";
      else if (levelPower >= 1000000000) rank = "A";
      else if (levelPower >= 500000000) rank = "B";

      const match = fgiTable.find(row => row.rank === rank && fgi >= row.min && fgi < row.max);
      const style = match ? match.style : "不明";

      output.innerHTML = `
        <strong>FGI:</strong> ${fgi.toFixed(3)}<br>
        <strong>ランク:</strong> ${rank}<br>
        <strong>育成スタイル:</strong> ${style}
      `;
      output.style.display = "block";

      const shareText = `【メメントモリ育成スタイル診断結果】
育成スタイル: ${style}

FGI(集中育成指数): ${fgi.toFixed(3)}
レベルリンク戦闘力ランク: ${rank}

メメントモリ育成スタイル診断の画像（リンク先は下記）
https://harupo.github.io/mememori/

#メメントモリ`;

      const encodedText = encodeURIComponent(shareText);
      const shareUrl = `https://twitter.com/intent/tweet?text=${encodedText}`;
      share.innerHTML = `<a href="${shareUrl}" target="_blank"><span class="material-icons">share</span>Xでシェアする</a>`;
      share.style.display = "block";
    }
  </script>
</body>
</html>
